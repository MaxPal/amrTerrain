# Generating the terrain file
# Geometry
geometry.prob_lo                                   = -25000 -25000 0 
geometry.prob_hi                                   = 24980 24980 5056 
geometry.is_periodic                               = 0 0 0
# Grid 
amr.n_cell                                         = 520 520 208
time.stop_time                                     = 600
time.initial_dt                                    = 1.0
time.fixed_dt                                      = -1
time.cfl                                           = 0.5
time.plot_time_interval                            = 600
time.checkpoint_time_interval                      = -1
io.output_default_variables                        = false 
io.outputs                                         = velocity temperature mu_turb tke terrain_vf 
io.int_outputs                                     = terrain_blank terrain_drag 
# incflo 
incflo.physics                                     = ABL TerrainDrag
incflo.density                                     = 1.225
incflo.gravity                                     = 0.  0. -9.81 
incflo.velocity                                    = 13.3025 5.3639 0 
incflo.verbose                                     = 0
incflo.initial_iterations                          = 8
incflo.do_initial_proj                             = true
incflo.constant_density                            = true
incflo.use_godunov                                 = true
incflo.godunov_type                                = "ppm"
incflo.diffusion_type                              = 2
# transport equation parameters 
transport.model                                    = ConstTransport
transport.viscosity                                = 1e-5
transport.laminar_prandtl                          = 0.7
transport.turbulent_prandtl                        = 0.333
# turbulence equation parameters
turbulence.model                                   = KLAxell
TKE.source_terms                                   = KransAxell
# Atmospheric boundary layer
ABL.perturb_velocity                               = false
ABL.perturb_temperature                            = false
ABL.kappa                                          = .41
ABL.normal_direction                               = 2
ABL.reference_temperature                          = 300
ABL.stats_output_format                            = netcdf
ABL.surface_roughness_z0                           = 0.1
ABL.wall_shear_stress_type                         = local
ABL.surface_temp_flux                              = 1.69766e-29
ABL.mol_length                                     = -1e+30
ABL.wall_het_model                                 = "mol"
ABL.horizontal_sponge_temp                         = true
ABL.horizontal_sponge_tke                          = true
# Source
ICNS.source_terms                                  = VelocityFreeAtmosphereForcing ABLMeanBoussinesq BoussinesqBuoyancy  CoriolisForcing  GeostrophicForcing  DragForcing 
GeostrophicForcing.geostrophic_wind                = 13.3025 5.3639 0
TerrainDrag.terrain_file                           = "terrain.amrwind.new" 
Temperature.source_terms                           = TemperatureFreeAtmosphereForcing  DragTempForcing
DragForcing.sponge_west                            = 1
DragForcing.sponge_east                            = 1
DragForcing.sponge_north                           = 1
DragForcing.sponge_south                           = 1
DragForcing.sponge_distance_west                   = -2500
DragForcing.sponge_distance_east                   = 2500
DragForcing.sponge_distance_south                  = -2500
DragForcing.sponge_distance_north                  = 2500
DragTempForcing.soil_temperature                   = 300
RayleighDamping.force_coord_directions             = 0 0 1
BoussinesqBuoyancy.reference_temperature           = 300
BoussinesqBuoyancy.thermal_expansion_coeff         = 0.00333333
CoriolisForcing.east_vector                        = 1.0 0.0 0.0 
CoriolisForcing.north_vector                       = 0.0 1.0 0.0 
CoriolisForcing.latitude                           = 45.6337 
RayleighDamping.reference_velocity                 = 13.3025 5.3639 0
RayleighDamping.length_sloped_damping              = 512
RayleighDamping.length_complete_damping            = 1536
RayleighDamping.time_scale                         = 20.0
ABL.metmast_horizontal_radius                      = 500
ABL.metmast_vertical_radius                        = 5
ABL.metmast_damping_radius                         = 100
# BC 
xlo.type                                           = "pressure_outflow"
xhi.type                                           = "pressure_outflow"
ylo.type                                           = "pressure_outflow"
yhi.type                                           = "pressure_outflow"
zhi.type                                           = "slip_wall"
zhi.temperature_type                               = "fixed_gradient"
zhi.temperature                                    =  0.003
zlo.type                                           = "wall_model"
mac_proj.num_pre_smooth                            = 8 
mac_proj.num_post_smooth                           = 8 
mac_proj.mg_rtol                                   = -1 
mac_proj.mg_atol                                   = 1e-4 
mac_proj.maxiter                                   = 25 
mac_proj.fmg_maxiter                               = 4
nodal_proj.num_pre_smooth                          = 8 
nodal_proj.num_post_smooth                         = 8 
nodal_proj.mg_rtol                                 = -1 
nodal_proj.mg_atol                                 = 1e-4 
nodal_proj.maxiter                                 = 25 
nodal_proj.fmg_maxiter                             = 4
diffusion.mg_rtol                                  = -1 
diffusion.mg_atol                                  = 1e-4 
temperature_diffusion.mg_rtol                      = -1 
temperature_diffusion.mg_atol                      = 1e-4 
tke_diffusion.mg_rtol                              = -1 
tke_diffusion.mg_atol                              = 1e-4 
ABL.initial_wind_profile                           = true
ABL.rans_1dprofile_file                            = "rans_1d.info" 
ABL.meso_sponge_start                              = 3008 
ABL.temperature_heights                            = 0  16.0856   32.1711   48.2567   64.3422   80.4278   96.5134   112.599   128.684   144.77   160.856   176.941   193.027   209.112   225.198   241.283   257.369   273.455   289.54   305.626   321.711   337.797   353.882   369.968   386.053   402.139   418.225   434.31   450.396   466.481   482.567   498.652   514.738   530.824   546.909   562.995   579.08   595.166   611.251   627.337   643.422   659.508   675.594   691.679   707.765   723.85   739.936   756.021   772.107   788.193   804.278   820.364   836.449   852.535   868.62   884.706   900.791   916.877   932.963   949.048   965.134   981.219   997.305   1013.39   1029.48   1045.56   1061.65   1077.73   1093.82   1109.9   1125.99   1142.07   1158.16   1174.25   1190.33   1206.42   1222.5   1238.59   1254.67   1270.76   1286.84   1302.93   1319.02   1335.1   1351.19   1367.27   1383.36   1399.44   1415.53   1431.61   1447.7   1463.79   1479.87   1495.96   1512.04   1528.13   1544.21   1560.3   1576.39   1592.47   1608.56   1624.64   1640.73   1656.81   1672.9   1688.98   1705.07   1721.16   1737.24   1753.33   1769.41   1785.5   1801.58   1817.67   1833.75   1849.84   1865.93   1882.01   1898.1   1914.18   1930.27   1946.35   1962.44   1978.52   1994.61   2010.7   2026.78   2042.87   2058.95   2075.04   2091.12   2107.21   2123.29   2139.38   2155.47   2171.55   2187.64   2203.72   2219.81   2235.89   2251.98   2268.06   2284.15   2300.24   2316.32   2332.41   2348.49   2364.58   2380.66   2396.75   2412.83   2428.92   2445.01   2461.09   2477.18   2493.26   2509.35   2525.43   2541.52   2557.6   2573.69   2589.78   2605.86   2621.95   2638.03   2654.12   2670.2   2686.29   2702.37   2718.46   2734.55   2750.63   2766.72   2782.8   2798.89   2814.97   2831.06   2847.14   2863.23   2879.32   2895.4   2911.49   2927.57   2943.66   2959.74   2975.83   2991.91   3008  5056 
ABL.temperature_values                             = 300  300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300.001   300.001   300.001   300.001   300.001   300.002   300.002   300.003   300.005   300.008   300.015   300.033   300.081   300.144   300.194   300.242   300.29   300.338   300.386   300.434   300.483   300.531   300.579   300.627   300.676   300.724   300.772   300.82   300.869   300.917   300.965   301.013   301.062   301.11   301.158   301.207   301.255   301.303   301.351   301.4   301.448   301.496   301.544   301.593   301.641   301.689   301.736   301.772   301.772  301.772 
# tagging
tagging.labels                                     = mast1 mast1terrain 
tagging.mast1.type                                 = GeometryRefinement
tagging.mast1.shapes                               = metmastobject0
tagging.mast1.min_level                            = 0
tagging.mast1.max_level                            = 2
tagging.mast1.metmastobject0.type                  = cylinder 
tagging.mast1.metmastobject0.start                 = -5.9366e-06 -0.000235293 411.779
tagging.mast1.metmastobject0.end                   = -5.9366e-06 -0.000235293 611.779
tagging.mast1.metmastobject0.outer_radius          = 500
tagging.mast1.metmastobject0.inner_radius          = 0
tagging.mast1terrain.type                          = FieldRefinement
tagging.mast1terrain.field_name                    = terrain_blank
tagging.mast1terrain.grad_error                    = 0.1 0.1 0.1 0.1 0.1 0.1
tagging.mast1terrain.box_lo                        = -500 -500 361.779 
tagging.mast1terrain.box_hi                        = 500 500 461.779 
amr.max_level                                      = 3
# postprocessing
incflo.post_processing                             = terrain10  roi10  terrain50  roi50  terrain100  roi100  terrain150  roi150  terrain200  roi200  terrain250  roi250  mast1 
terrain10.fields                                   = velocity temperature 
terrain10.output_format                            = "native"
terrain10.output_frequency                         = 600
terrain10.labels                                   = terrain10 
terrain10.terrain10.type                           = ProbeSampler
terrain10.terrain10.probe_location_file            = "terrain.csv"
terrain10.terrain10.offset_vector                  = 0 0 1
terrain10.terrain10.offsets                        = 10 
roi10.fields                                       = velocity temperature 
roi10.output_format                                = "native"
roi10.output_frequency                             = 600
roi10.labels                                       = roi10 
roi10.roi10.type                                   = ProbeSampler
roi10.roi10.probe_location_file                    = "region_of_interest.csv"
roi10.roi10.offset_vector                          = 0 0 1
roi10.roi10.offsets                                = 10 
terrain50.fields                                   = velocity temperature 
terrain50.output_format                            = "native"
terrain50.output_frequency                         = 600
terrain50.labels                                   = terrain50 
terrain50.terrain50.type                           = ProbeSampler
terrain50.terrain50.probe_location_file            = "terrain.csv"
terrain50.terrain50.offset_vector                  = 0 0 1
terrain50.terrain50.offsets                        = 50 
roi50.fields                                       = velocity temperature 
roi50.output_format                                = "native"
roi50.output_frequency                             = 600
roi50.labels                                       = roi50 
roi50.roi50.type                                   = ProbeSampler
roi50.roi50.probe_location_file                    = "region_of_interest.csv"
roi50.roi50.offset_vector                          = 0 0 1
roi50.roi50.offsets                                = 50 
terrain100.fields                                  = velocity temperature 
terrain100.output_format                           = "native"
terrain100.output_frequency                        = 600
terrain100.labels                                  = terrain100 
terrain100.terrain100.type                         = ProbeSampler
terrain100.terrain100.probe_location_file          = "terrain.csv"
terrain100.terrain100.offset_vector                = 0 0 1
terrain100.terrain100.offsets                      = 100 
roi100.fields                                      = velocity temperature 
roi100.output_format                               = "native"
roi100.output_frequency                            = 600
roi100.labels                                      = roi100 
roi100.roi100.type                                 = ProbeSampler
roi100.roi100.probe_location_file                  = "region_of_interest.csv"
roi100.roi100.offset_vector                        = 0 0 1
roi100.roi100.offsets                              = 100 
terrain150.fields                                  = velocity temperature 
terrain150.output_format                           = "native"
terrain150.output_frequency                        = 600
terrain150.labels                                  = terrain150 
terrain150.terrain150.type                         = ProbeSampler
terrain150.terrain150.probe_location_file          = "terrain.csv"
terrain150.terrain150.offset_vector                = 0 0 1
terrain150.terrain150.offsets                      = 150 
roi150.fields                                      = velocity temperature 
roi150.output_format                               = "native"
roi150.output_frequency                            = 600
roi150.labels                                      = roi150 
roi150.roi150.type                                 = ProbeSampler
roi150.roi150.probe_location_file                  = "region_of_interest.csv"
roi150.roi150.offset_vector                        = 0 0 1
roi150.roi150.offsets                              = 150 
terrain200.fields                                  = velocity temperature 
terrain200.output_format                           = "native"
terrain200.output_frequency                        = 600
terrain200.labels                                  = terrain200 
terrain200.terrain200.type                         = ProbeSampler
terrain200.terrain200.probe_location_file          = "terrain.csv"
terrain200.terrain200.offset_vector                = 0 0 1
terrain200.terrain200.offsets                      = 200 
roi200.fields                                      = velocity temperature 
roi200.output_format                               = "native"
roi200.output_frequency                            = 600
roi200.labels                                      = roi200 
roi200.roi200.type                                 = ProbeSampler
roi200.roi200.probe_location_file                  = "region_of_interest.csv"
roi200.roi200.offset_vector                        = 0 0 1
roi200.roi200.offsets                              = 200 
terrain250.fields                                  = velocity temperature 
terrain250.output_format                           = "native"
terrain250.output_frequency                        = 600
terrain250.labels                                  = terrain250 
terrain250.terrain250.type                         = ProbeSampler
terrain250.terrain250.probe_location_file          = "terrain.csv"
terrain250.terrain250.offset_vector                = 0 0 1
terrain250.terrain250.offsets                      = 250 
roi250.fields                                      = velocity temperature 
roi250.output_format                               = "native"
roi250.output_frequency                            = 600
roi250.labels                                      = roi250 
roi250.roi250.type                                 = ProbeSampler
roi250.roi250.probe_location_file                  = "region_of_interest.csv"
roi250.roi250.offset_vector                        = 0 0 1
roi250.roi250.offsets                              = 250 
mast1.fields                                       = velocity temperature 
mast1.output_format                                = "native"
mast1.output_frequency                             = 600
mast1.labels                                       = mast1 
mast1.mast1.type                                   = LineSampler
mast1.mast1.num_points                             = 50
mast1.mast1.start                                  = -5.9366e-06 -0.000235293 282.625
mast1.mast1.end                                    = -5.9366e-06 -0.000235293 482.625
